# Smart Money V2 钱包评测系统

## 概述

Smart Money V2 是一个超严格的钱包评测系统，专门用于筛选超强钱包（跟着买一定能赚钱且赚大钱的那种）。系统采用多维度评分机制，自动识别和过滤垃圾地址，帮助用户在最短时间内找到最值得跟踪的钱包。

## 功能特点

### 1. 多维度评分系统

#### 盈利力维度（权重45%）
- **盈亏比**：盈利总额 / 亏损总额
- **7天总盈利额/百分比**：最近7天的盈利表现
- **30天总盈利额/百分比**：最近30天的盈利表现
- **单币ROI**：最大、平均、中位数ROI
- **最大单笔亏损**：评估止损纪律

#### 持久力维度（权重35%）
- **胜率**：盈利项目占比
- **交易频次**：近7天、30天交易的币种数和交易次数
- **活跃度**：评估钱包的交易活跃程度

#### 真实性维度（权重20%）
- **平均持仓时间**：评估交易策略
- **盈利代币平均持仓时间**：盈利项目的持仓特征
- **亏损代币平均持仓时间**：亏损项目的持仓特征
- **代币多样性**：交易过多少个不同的代币

### 2. 垃圾地址自动识别

系统会自动识别以下类型的垃圾地址并加入黑名单：

1. **快枪手**：平均持仓时间 < 1 分钟
2. **归零战神**：胜率 ≥ 90% 但最大亏损 ≤ -95%（不止损，死扛到归零）
3. **内幕狗**：只交易过 1-2 个代币（项目方小号，不可复制）
4. **钓鱼佬**：频繁买入貔貅盘或交易量极小的盘子（专门骗跟单机器人）

### 3. 钱包定位系统

系统会根据钱包特征给出以下定位评分：

- **🛡️ 稳健中军**：胜率高、盈亏比好、持仓时间适中
- **⚔️ 土狗猎手**：盈亏比极高、单币ROI高、交易频次高
- **💎 钻石之手**：持仓时间长、胜率高、代币多样性好
- **🚀 短线高手**：交易频次高、胜率高、持仓时间短但有效

### 4. S级战神标准

符合以下标准的钱包会被给予额外加分（最多+20分）：

- 最近30天交易了 ≥ 50 个不同的代币
- 胜率 ≥ 65%
- 总盈利 ≥ 200 SOL
- 平均持仓 ≥ 2 小时
- 从来没有单笔亏损超过 -50%（说明有止损纪律）
- 不是只玩一个币

## 使用方法

### 单个钱包分析

```bash
python tools/SMV2/analyze_wallet.py <钱包地址> [--max-txs 20000]
```

示例：
```bash
python tools/SMV2/analyze_wallet.py 7xKXtg2CW87d97TXJSDpbD5jBkheTqA83TZRuJosgAsU
```

### 批量钱包分析

```bash
python tools/SMV2/batch_analyze.py
```

批量分析会：
1. 从 `tools/smart_money/wallets.txt` 读取钱包地址列表
2. 自动过滤黑名单中的地址（`tools/smart_money/wallets_trash.txt`）
3. 分析每个钱包并计算评分
4. 自动将垃圾地址加入黑名单
5. 导出 Excel 报告到 `tools/SMV2/results/` 目录

## 输出说明

### 单个钱包分析输出

- **核心汇总**：项目总数、胜率、盈亏比、累计利润、时间窗口利润、平均持仓、代币多样性等
- **维度评分**：盈利力、持久力、真实性的详细评分
- **定位评分**：各个定位的评分雷达图
- **综合评级**：S/A/B/C/F 等级和最终评分
- **重点项目明细**：按利润排序的前10个项目

### 批量分析输出

Excel 报告包含以下列：

- **钱包地址**：钱包地址
- **综合评分**：最终评分（0-100）
- **战力评级**：S/A/B/C/F
- **最佳定位**：最适合的定位
- **定位评分**：最佳定位的评分
- **盈利力评分**：盈利力维度评分
- **持久力评分**：持久力维度评分
- **真实性评分**：真实性维度评分
- **盈亏比**：盈利总额/亏损总额
- **胜率**：盈利项目占比
- **总盈亏(SOL)**：累计盈亏
- **30天盈利(SOL)**：最近30天盈利
- **30天盈利(%)**：最近30天盈利百分比
- **7天盈利(SOL)**：最近7天盈利
- **7天盈利(%)**：最近7天盈利百分比
- **最大单笔ROI**：单笔最大收益率
- **最大单笔亏损**：单笔最大亏损率
- **平均持仓(分钟)**：平均持仓时间
- **盈利持仓(分钟)**：盈利项目的平均持仓时间
- **亏损持仓(分钟)**：亏损项目的平均持仓时间
- **代币多样性**：交易过的不同代币数量
- **30天代币数**：最近30天交易的代币数
- **30天交易数**：最近30天的交易次数
- **7天代币数**：最近7天交易的代币数
- **7天交易数**：最近7天的交易次数
- **项目总数**：总项目数
- **各定位评分**：🛡️ 稳健中军、⚔️ 土狗猎手、💎 钻石之手、🚀 短线高手的评分

## 配置说明

### 环境变量

需要在 `.env` 或 `config/settings.py` 中配置：

- `HELIUS_API_KEY`：Helius API 密钥（必需）
- `JUPITER_API_KEY`：Jupiter API 密钥（可选，但推荐）

### 评分阈值配置

可以在 `analyze_wallet.py` 中调整以下阈值：

```python
# 垃圾地址识别阈值
FAST_GUN_THRESHOLD_MINUTES = 1  # 快枪手阈值
ZERO_WARRIOR_WIN_RATE = 0.90  # 归零战神胜率阈值
ZERO_WARRIOR_MAX_LOSS = -0.95  # 归零战神最大亏损阈值
INSIDER_DOG_MAX_TOKENS = 2  # 内幕狗代币数阈值

# S级战神标准
S_TIER_MIN_TOKENS_30D = 50  # 30天交易代币数
S_TIER_MIN_WIN_RATE = 0.65  # 胜率
S_TIER_MIN_PROFIT_30D = 200  # 30天总盈利 (SOL)
S_TIER_MIN_HOLD_TIME_HOURS = 2  # 平均持仓时间 (小时)
S_TIER_MAX_SINGLE_LOSS = -0.50  # 最大单笔亏损不能超过 -50%
```

## 设计原则

1. **严格筛选**：只保留真正有价值的钱包
2. **多维度评估**：不只看盈利，还要看持久力和真实性
3. **时间窗口分析**：关注最近7天和30天的表现
4. **自动过滤**：垃圾地址自动加入黑名单
5. **定位清晰**：每个钱包都有明确的定位和评分

## 注意事项

1. API 限制：注意 Helius 和 Jupiter API 的速率限制
2. 数据准确性：价格数据依赖 Jupiter API，可能有时延
3. 评分标准：可以根据实际需求调整评分权重和阈值
4. 黑名单管理：垃圾地址会自动加入黑名单，可以手动编辑 `wallets_trash.txt`

## 版本历史

- **V2 (2026-02-02)**：超严格版本，多维度评分，垃圾地址识别，定位系统
- **V1**：基础版本（在 `tools/SMV1/` 目录）

## 作者

Auto-generated
